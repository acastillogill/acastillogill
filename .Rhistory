tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)
saveWidget(plot_downloads_per_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
plot_downloads_per_capita <- tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)
widget_capita <- tmap_leaflet(plot_downloads_per_capita)
saveWidget(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
setwd(currentWD)
saveWidget(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
here::here("static","leaflet")
saveWidget(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
currentWD <- getwd()
dir.create("static/leaflet", showWarnings = FALSE)
setwd("static/leaflet")
saveWidget(widget_capita , "plot_downloads_per_capita.html")
setwd(currentWD)
here::here()
<iframe seamless src="/static/leaflet/plot_downloads_per_capita/index.html" width="100%" height="500"></iframe>
blogdown::serve_site()
saveWidget(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
blogdown::serve_site()
here::here("static","leaflet","plot_downloads_per_capita.html")
save_tmap(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
tmap_save(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
plot_downloads_per_capita <- tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)
widget_capita <- tmap_leaflet(plot_downloads_per_capita)
tmap_save(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
class(widget_capita)
widget_capita
widget_capita <- tmap_leaflet(world_full)+ tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)
saveWidget(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
tmap_mode("view")
widget_capita <- tmap_leaflet(world_full)+ tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)
saveWidget(widget_capita, here::here("static","leaflet","plot_downloads_per_capita.html"))
leaflet(width = "100%", height = "800px") %>%
# base layers
addTiles(group = "OpenStreeMap.Default") %>%
addPolygons(data = world_full, weight = 1, color = "black", smoothFactor = 0.3,
fillOpacity = 0.8, fillColor = ~n_capita,
label = ~paste0(name, ": ", formatC(n_capita, big.mark = "'")),
group = "Population Density (Europe)")
#saveWidget(widget_capita, #here::here("static","leaflet","plot_downloads_per_capita.html"))
leaflet(width = "100%", height = "800px") %>%
# base layers
addTiles(group = "OpenStreeMap.Default") %>%
addPolygons(data = world_full, weight = 1, color = "black", smoothFactor = 0.3,
fillOpacity = 0.8, fillColor = ~world_full$n_capita,
label = ~paste0(name, ": ", formatC(world_full$n_capita, big.mark = "'")),
group = "Population Density (Europe)")
#saveWidget(widget_capita, #here::here("static","leaflet","plot_downloads_per_capita.html"))
leaflet(width = "100%", height = "800px") %>%
# base layers
addTiles(group = "OpenStreeMap.Default") %>%
addPolygons(data = world_full,
fillColor = ~pal1(world_full$n_capita),
fillOpacity = 1,
color = "darkgrey",       ## color of borders between districts
weight = 1.5,            ## width of borders
popup = popup1,
group = "EOIs")
#saveWidget(widget_capita, #here::here("static","leaflet","plot_downloads_per_capita.html"))
leaflet(width = "100%", height = "800px") %>%
# base layers
addTiles(group = "OpenStreeMap.Default") %>%
addPolygons(data = world_full,
fillColor = ~pal1(world_full$n_capita),
fillOpacity = 1,
color = "darkgrey",       ## color of borders between districts
weight = 1.5,            ## width of borders
group = "EOIs")
#saveWidget(widget_capita, #here::here("static","leaflet","plot_downloads_per_capita.html"))
leaflet(width = "100%", height = "800px") %>%
# base layers
addTiles(group = "OpenStreeMap.Default") %>%
addPolygons(data = world_full,
fillColor = ~world_full$n_capita,
fillOpacity = 1,
color = "darkgrey",       ## color of borders between districts
weight = 1.5,            ## width of borders
group = "EOIs")
#saveWidget(widget_capita, #here::here("static","leaflet","plot_downloads_per_capita.html"))
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)
tmap_mode("plot")
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)+
tm_format("World")
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)+
tm_format("World","The World")
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks", tit) +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_scale_bar(breaks = c(0, 100, 200), size = 1)+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = FALSE)+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE)+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE)+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE)+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE)+
tm_legend(position=c("left", "bottom"), bg.color="grey95", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE)+
tm_legend(position=c("left", "bottom"), bg.color="aliceblue", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE)+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE, bg.color = "aliceblue")+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE, bg.color = "aliceblue", title.position = c("top","right"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE, bg.color = "aliceblue", title.position = c("right","top"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE, bg.color = "aliceblue", title.position = c("right","top",title.bg.color="FALSE"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=FALSE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout("R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE, bg.color = "aliceblue", title.position = c("right","top"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per Capita in 2017/18", title.size=.8, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per Capita in 2017/18",
main.title.size = 1, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per Capita in 2017/18",
main.title.size = 5, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per Capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=2)
n_capita_map <- tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
tmap_leaflet(n_capita_map, mode = "view", show = TRUE)
n_capita_map <- tm_shape(world_full) +
tm_bubbles(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
tmap_leaflet(n_capita_map, mode = "view", show = TRUE)
n_capita_map <- tm_shape(world_full) +
tm_bubbles(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
html_downloads_capita <- tmap_leaflet(n_capita_map, mode = "view", show = TRUE)
html_downloads_capita
n_capita_map <- tm_shape(world_full) +
tm_fill(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
html_downloads_capita <- tmap_leaflet(n_capita_map, mode = "view", show = TRUE)
n_capita_map <- tm_shape(world_full) +
tm_fill(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
html_downloads_capita <- tmap_leaflet(n_capita_map, mode = "view", show = TRUE)
n_capita_map <- tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
html_downloads_capita <- tmap_leaflet(n_capita_map, mode = "view", show = TRUE)
n_capita_map <- tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
html_downloads_capita <- tmap_leaflet(n_capita_map, mode = "plot", show = TRUE)
class(html_downloads_capita)
n_capita_map <- tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
html_downloads_capita <- tmap_leaflet(n_capita_map, mode = "view", show = TRUE)
class(html_downloads_capita)
html_downloads_capita
n_capita_map <- tm_shape(world_full) +
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
n_capita_map <- tm_shape(world_full) +
tm_borders(col="white")+
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black")+
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.5)+
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.1)+
tm_polygons(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.1)+
tm_fill(col="n_capita",n=4, style="jenks") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
tmaptools::palette_explorer()
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.1)+
tm_fill(col="n_capita",n=4, style="jenks", palette = "virids") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.1)+
tm_fill(col="n_capita",n=4, style="jenks", palette = "viridis") +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
tmaptools::palette_explorer()
get_brewer_pal("BrBG", n = 4, contrast = c(0.37, 0.77))
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.1)+
tm_fill(col="n_capita",n=4, style="jenks", palette = get_brewer_pal("BrBG", n = 4, contrast = c(0.37, 0.77))) +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
tmaptools::palette_explorer()
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.1)+
tm_fill(col="n_capita",n=4, style="jenks", palette = get_brewer_pal("YlOrRd", n = 4, contrast = c(0.13, 0.9))) +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.1)+
tm_fill(col="n_capita",n=4, style="jenks", palette = get_brewer_pal("BuPu", n = 4, contrast = c(0.13, 0.9))) +
tm_layout(main.title = "Total R downloads in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
blogdown::serve_site()
n_capita_map <- tm_shape(world_full) +
tm_borders(col="black", lwd=0.1)+
tm_fill(col="n_capita",n=4, style="jenks", palette = get_brewer_pal("YlOrRd", n = 4, contrast = c(0.13, 0.9))) +
tm_layout(main.title = "R Downloads per capita in 2017/18",
main.title.size = 2, frame = TRUE, bg.color = "aliceblue", title.position = c("right","bottom"))+
tm_legend(position=c("left", "bottom"), bg.color="white", frame=TRUE, legend.title.size=1)
n_capita_map
library(dplyr)
library(knitr)
library(here)
library(scales)
library(magrittr)
library(ggplot2)
library(cowplot)
library(tidyverse)
library(Metrics)
library(rsample)
library(broom)
library(sf)
library(rgdal)
library(summarytools)
library(leaflet)
library(tmap)
library(tmaptools)
library(htmlwidgets)
library(htmltools)
library(lubridate)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
options(
digits=3,
scipen = 999
)
scale_colour_discrete <- function(...) scale_colour_brewer(..., palette="Paired")
scale_fill_discrete <- function(...) scale_fill_brewer(... , palette="Paired")
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
r_downloads <- na.omit(r_downloads)
View(r_downloads)
iso_codes <- read_csv(here::here("static","data","iso_countries.csv"))
r_downloads%<>%
full_join(iso_codes, by=c("country"="iso"))%>%
filter(!is.na(sub_region))
r_downloads%>%
#Group by the month of the year
group_by(month(date), sub_region)%>%
#Count downloads by the month of the year
summarise(monthly_downloads=n())%>%
#Pipe to make a plot
ggplot(aes(x=`month(date)`,y= monthly_downloads))+
#Add line
geom_line(alpha=0.5, color="purple")+
geom_point(color="purple")+
scale_x_continuous(breaks=c(seq(1,12,1)))+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add title
labs(title="Monthly R-downloads around the world",
y="Downloads",
x="Week")+
facet_wrap(~sub_region, scales="free")
r_downloads%>%
group_by(country)%>%
summarise(n=n())%>%
filter(!is.na(n))%>%
arrange(desc(n))->downloads_per_country
downloads_per_country%>%
arrange(desc(n))%>%
head(10)%>%
mutate(name=fct_reorder(name,n))%>%
ggplot(aes(name,n,fill=name))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 10 countries by R downloads",
x="",
y="Downloads")+
theme(legend.position = "none")
names(downloads_per_country)
downloads_per_country%>%
arrange(desc(n))%>%
head(10)%>%
mutate(name=fct_reorder(country,n))%>%
ggplot(aes(country,n,fill=country))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 10 countries by R downloads",
x="",
y="Downloads")+
theme(legend.position = "none")
internet_users <-read_csv(here::here("static","data","internet_users.csv"))
r_downloads%>%
group_by(country)%>%
summarise(n=n())%>%
filter(!is.na(n))%>%
arrange(desc(n))->downloads_per_country
library(dplyr)
library(knitr)
library(here)
library(scales)
library(magrittr)
library(ggplot2)
library(cowplot)
library(tidyverse)
library(Metrics)
library(rsample)
library(broom)
library(sf)
library(rgdal)
library(summarytools)
library(leaflet)
library(tmap)
library(tmaptools)
library(htmlwidgets)
library(htmltools)
library(lubridate)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
options(
digits=3,
scipen = 999
)
scale_colour_discrete <- function(...) scale_colour_brewer(..., palette="Paired")
scale_fill_discrete <- function(...) scale_fill_brewer(... , palette="Paired")
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
r_downloads <- na.omit(r_downloads)
iso_codes <- read_csv(here::here("static","data","iso_countries.csv"))
r_downloads%<>%
full_join(iso_codes, by=c("country"="iso"))%>%
filter(!is.na(sub_region))
r_downloads%>%
group_by(country)%>%
summarise(n=n())%>%
filter(!is.na(n))%>%
arrange(desc(n))->downloads_per_country
iso_codes <- read_csv(here::here("static","data","iso_countries.csv"))
downloads_per_country%<>%
full_join(iso_codes, by=c("country"="iso"))
downloads_per_country%>%
arrange(desc(n))%>%
head(10)%>%
mutate(name=fct_reorder(name,n))%>%
ggplot(aes(name,n,fill=name))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 10 countries by R downloads",
x="",
y="Downloads")+
theme(legend.position = "none")
blogdown::serve_site()
