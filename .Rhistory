# Chunk 9: merge-internet-users
downloads_per_country%<>%
right_join(internet_users, by=c("name"="name"))
# Chunk 10: downloads-internet-users-scatter-plot
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
geom_jitter(alpha=0.3)+ scale_x_continuous(labels=comma_format())+
scale_y_continuous(labels=comma_format())+
geom_smooth(aes(group=1),method="lm")+
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")+ theme(legend.position = "bottom")
ggplotly(downloads_internet_plot)
blod
blogdown::serve_site()
library(tidyverse)
library(rpart)
library(rpart.plot)
library(knitr)
library(here)
library(scales)
library(magrittr)
options(digits=4)
options(scipen = 999)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
glimpse(downloads)
blogdown::serve_site()
r_downloads%>%glimpse()
# Chunk 1: setup
library(tidyverse)
library(rpart)
library(rpart.plot)
library(knitr)
library(here)
library(scales)
library(magrittr)
options(digits=4)
options(scipen = 999)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
# Chunk 4: downloads-by-country
r_downloads%>%
#Count and arrange downloads per country
count(country,sort = TRUE)%>%
ungroup()->downloads_per_country
# Chunk 5: read-country-codes
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
# Chunk 6: merge-country-codes
downloads_per_country%<>%
right_join(iso_codes, by=c("country"="iso"))
# Chunk 7: top-20-countries-plot
downloads_per_country%>%
arrange(desc(n))%>%
filter(!is.na(name))%>%
head(20)%>%
mutate(name=fct_reorder(name,n))%>%
ggplot(aes(name,n,fill=name))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 20 countries by R downloads",
x="Country",
y="Downloads")+
theme(legend.position = "none")
# Chunk 8: read-internet-users
internet_users <-read_csv(here("static","data","internet_users.csv"))
# Chunk 9: merge-internet-users
downloads_per_country%<>%
right_join(internet_users, by=c("name"="name"))
# Chunk 10: downloads-internet-users-scatter-plot
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
geom_jitter(alpha=0.3)+ scale_x_continuous(labels=comma_format())+
scale_y_continuous(labels=comma_format())+
geom_smooth(aes(group=1),method="lm")+
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")+ theme(legend.position = "bottom")
ggplotly(downloads_internet_plot)
r_downloads%>%glimpse()
blogdown::serve_site()
library(dplyr)
r_downloads%>%
#Count and arrange downloads per country
count(country,sort = TRUE)%>%
ungroup()->downloads_per_country
blogdown::serve_site()
?countç
?count
remove.packages(pkgs, lib)
remove.packages(plyr)
remove.packages("plyr")
library(plyr)
remove.packages("plyr")
libPaths()
..libPaths()
.libPaths()
p_install(plyr, character.only = TRUE)
detach("package:plyr", unload=TRUE)
library(dplyr)
r_downloads%>%
#Count and arrange downloads per country
dplyr::count(country,sort = TRUE)%>%
ungroup()->downloads_per_country
detach("package:plyr", unload=TRUE)
remove.packages("plyr")
downloads_per_country%>%
arrange(desc(n))%>%
filter(!is.na(name))%>%
head(20)%>%
mutate(name=fct_reorder(name,n))%>%
ggplot(aes(name,n,fill=name))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 20 countries by R downloads",
x="Country",
y="Downloads")+
theme(legend.position = "none")
remove.packages("plyr", lib = "/Library/Frameworks/R.framework/Versions/3.5/Resources/library")
libray(plyr)
library(plyr)
remove.packages("plyr", lib = "/Users/AngelaDelgado/Library/R/3.5/library")
blogdown::serve_site()
install.packages("ggplot2")
blogdown::serve_site()
r_downloads%>%
group_by(country)
# Chunk 1: setup
library(ggplot2)
library(dplyr)
library(knitr)
library(here)
library(scales)
library(magrittr)
options(digits=4)
options(scipen = 999)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
r_downloads%>%
group_by(country)%>%
summarise(n=n())
r_downloads%>%
group_by(country)%>%
summarise(n=n())%>%
arrange(desc(n))
blogdown::serve_site()
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")+
theme(legend.position = "bottom")
ggplotly(downloads_internet_plot)
?ggplotly
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")+
theme_update(legend.position = "bottom")
ggplotly(downloads_internet_plot)
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")+
theme_update(legend.position = "bottom")
ggplotly(downloads_internet_plot)
# Chunk 1: setup
library(tidyverse)
library(dplyr)
library(knitr)
library(here)
library(scales)
library(magrittr)
options(digits=4)
options(scipen = 999)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
# Chunk 2: downloads-by-country
r_downloads%>%
group_by(country)%>%
summarise(n=n())%>%
arrange(desc(n))->downloads_per_country
# Chunk 3: read-country-codes
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
# Chunk 4: merge-country-codes
downloads_per_country%<>%
right_join(iso_codes, by=c("country"="iso"))
# Chunk 5: top-20-countries-plot
downloads_per_country%>%
arrange(desc(n))%>%
filter(!is.na(name))%>%
head(20)%>%
mutate(name=fct_reorder(name,n))%>%
ggplot(aes(name,n,fill=name))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 20 countries by R downloads",
x="Country",
y="Downloads")+
theme(legend.position = "none")
# Chunk 6: read-internet-users
internet_users <-read_csv(here("static","data","internet_users.csv"))
# Chunk 7: merge-internet-users
downloads_per_country%<>%
right_join(internet_users, by=c("name"="name"))
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")+
theme_update(legend.position = "bottom")
ggplotly(downloads_internet_plot)
downloads_internet_plot
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
#Add title
theme(legend.position="bottom")+
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")
ggplotly(downloads_internet_plot)
---
title: "Adding variables"
subtitle: "This will be fun, as I search for variables, I'll add them to the regression to the see the adjusted effects."
author: Ángela Castillo-Gill
date: '2018-12-04'
slug: adding-variables
categories:
- Journal
tags:
- Learning
draft: FALSE
summary: "This will be fun, as I search for variables, I'll add them to the regression to the see the adjusted effects."
output:
blogdown::html_page:
fig_caption: true
editor_options:
chunk_output_type: console
---
```{r setup, echo=FALSE, message=FALSE}
library(tidyverse)
library(dplyr)
library(knitr)
library(here)
library(scales)
library(magrittr)
options(digits=4)
options(scipen = 999)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
```
Today I've added one variable `internet_users` which sums the total internet users per country. The point is to slowly add regressors or independent variables and see if they have a linear relationship with `r-downloads`. If yes, I'll add them to a model.
[Data source](https://github.com/rfordatascience/tidytuesday/tree/master/data/2018-10-30)
```{r downloads-by-country}
r_downloads%>%
group_by(country)%>%
summarise(n=n())%>%
arrange(desc(n))->downloads_per_country
```
Now I'm going to give the countries full names, to do this I will use the ISO code to merge and obtain names.
```{r read-country-codes}
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
```
```{r merge-country-codes}
downloads_per_country%<>%
right_join(iso_codes, by=c("country"="iso"))
```
## Which are the top ten countries in terms of downloads
```{r top-20-countries-plot}
downloads_per_country%>%
arrange(desc(n))%>%
filter(!is.na(name))%>%
head(20)%>%
mutate(name=fct_reorder(name,n))%>%
ggplot(aes(name,n,fill=name))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 20 countries by R downloads",
x="Country",
y="Downloads")+
theme(legend.position = "none")
```
```{r read-internet-users}
internet_users <-read_csv(here("static","data","internet_users.csv"))
```
```{r merge-internet-users}
downloads_per_country%<>%
right_join(internet_users, by=c("name"="name"))
```
```{r downloads-internet-users-scatter-plot}
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
theme_update(legend.position='bottom')+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")
ggplotly(downloads_internet_plot)
```
downloads_per_country%>%glimpseU
downloads_per_country%>%glimpse()
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
theme(legend.position = c(.2,.85))+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")
ggplotly(downloads_internet_plot)
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
theme(legend.position = "bottom", legend.title = element_blank())+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")
ggplotly(downloads_internet_plot)%>%
layout(legend = list(orientation = "h", x = 0.4, y = -0.2))
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
head(100)%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
theme(legend.position = "bottom", legend.title = element_blank())+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")
ggplotly(downloads_internet_plot)%>%
layout(legend = list(orientation = "h", x = 0.4, y = -0.2))
library(plotly)
library(ggrepel)
downloads_internet_plot<- downloads_per_country%>%
arrange(desc(n))%>%
ggplot(aes(users, n, label=name, color=region))+
#Add light opacity
geom_jitter(alpha=0.3)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
theme(legend.position = "bottom", legend.title = element_blank())+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")
ggplotly(downloads_internet_plot)%>%
layout(legend = list(orientation = "h", x = 0.4, y = -0.2))
