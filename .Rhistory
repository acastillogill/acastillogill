library(dplyr)
library(knitr)
library(here)
library(scales)
library(magrittr)
library(ggplot2)
library(cowplot)
library(tidyverse)
library(lubridate)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
options(
digits=3,
scipen = 999
)
scale_colour_discrete <- function(...) scale_colour_brewer(..., palette="Paired")
scale_fill_discrete <- function(...) scale_fill_brewer(... , palette="Paired")
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
r_downloads$country[is.na(r_downloads$country)] <- ""
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
r_downloads <- r_downloads%>%
full_join(iso_codes,by=c("country"="iso"))
names(r_downloads)
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
r_downloads <- r_downloads%>%
full_join(iso_codes,by=c("country"="iso"))%>%
select(date,time,size,version,os,country,iso_3,country_code,sub_region)
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
r_downloads <- r_downloads%>%
full_join(iso_codes,by=c("country"="iso"))%>%
dplyr::select(date,time,size,version,os,country,iso_3,country_code,sub_region)
names(r_downloads)
View(r_downloads)
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
r_downloads <- r_downloads%>%
full_join(iso_codes,by=c("country"="iso"))%>%
dplyr::select(date,
time,
size,
version,
os,
country,
iso_3,
country_code,
sub_region)
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
r_downloads <- r_downloads%>%
full_join(iso_codes,by=c("country"="iso"))%>%
dplyr::select(date,
time,
size,
version,
os,
country,
country_code,
sub_region)
library(dplyr)
library(knitr)
library(here)
library(scales)
library(magrittr)
library(ggplot2)
library(cowplot)
library(tidyverse)
library(lubridate)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
options(
digits=3,
scipen = 999
)
scale_colour_discrete <- function(...) scale_colour_brewer(..., palette="Paired")
scale_fill_discrete <- function(...) scale_fill_brewer(... , palette="Paired")
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
r_downloads$country[is.na(r_downloads$country)] <- ""
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
r_downloads <- r_downloads%>%
full_join(iso_codes,by=c("country"="iso"))%>%
dplyr::select(date,
time,
size,
version,
os,
country,
iso_3,
country_code,
sub_region)
r_downloads
r_downloads%>%
group_by(country)%>%
summarise(n=n())%>%
arrange(desc(n))->downloads_per_country
downloads_per_country%>%
arrange(desc(n))%>%
head(10)%>%
mutate(country=fct_reorder(country,n))%>%
ggplot(aes(country,n,fill=country))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 10 countries by R downloads",
x="",
y="Downloads")+
theme(legend.position = "none")
library(dplyr)
library(knitr)
library(here)
library(scales)
library(magrittr)
library(ggplot2)
library(cowplot)
library(tidyverse)
library(lubridate)
opts_chunk$set(echo = TRUE,
warning = FALSE,
error = FALSE,
message = FALSE,
collapse= TRUE,
comment = NA,
tidy = TRUE)
theme_set(theme_light())
options(
digits=3,
scipen = 999
)
scale_colour_discrete <- function(...) scale_colour_brewer(..., palette="Paired")
scale_fill_discrete <- function(...) scale_fill_brewer(... , palette="Paired")
r_downloads <- readRDS(file=here::here("static","data","r-downloads.rds"))
r_downloads <- na.omit(r_downloads)
iso_codes <- read_csv(here("static","data","iso_countries.csv"))
r_downloads <- r_downloads%>%
full_join(iso_codes,by=c("country"="iso"))%>%
dplyr::select(date,
time,
size,
version,
os,
country,
iso_3,
country_code,
sub_region)
r_downloads%>%
group_by(country)%>%
summarise(n=n())%>%
arrange(desc(n))->downloads_per_country
downloads_per_country%>%
arrange(desc(n))%>%
head(10)%>%
mutate(country=fct_reorder(country,n))%>%
ggplot(aes(country,n,fill=country))+
geom_col()+
expand_limits(y=0)+
coord_flip()+
scale_y_continuous(labels=comma_format())+
labs(title="Top 10 countries by R downloads",
x="",
y="Downloads")+
theme(legend.position = "none")
internet_users <-read_csv(here("static","data","internet_users.csv"))
downloads_users_country <-downloads_per_country%>%
left_join(internet_users, by=c("country"="name"))
library(plotly)
downloads_internet_plot<- downloads_users_country%>%
arrange(desc(n))%>%
ggplot(aes(users, n, label=country, color=subregion))+
#Add light opacity
geom_point(alpha=0.5)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
#Fix legend
theme(legend.position = "bottom", legend.title = element_blank())+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")
ggplotly(downloads_internet_plot)%>%
layout(legend = list(orientation = "h", x = 0.4, y = -0.2))
downloads_users_country <-downloads_per_country%>%
full_join(internet_users, by=c("country"="name"))
library(plotly)
downloads_internet_plot<- downloads_users_country%>%
arrange(desc(n))%>%
ggplot(aes(users, n, label=country, color=subregion))+
#Add light opacity
geom_point(alpha=0.5)+
#Add nice commas x axis
scale_x_continuous(labels=comma_format())+
#Add nice commas y axis
scale_y_continuous(labels=comma_format())+
#Add a linear regression line for all regions
geom_smooth(aes(group=1),method="lm")+
#Fix legend
theme(legend.position = "bottom", legend.title = element_blank())+
#Add title
labs(title="Do R-Language downloads increase with more internet users?",
y="Downloads per country",
x="Internet users in each country")
ggplotly(downloads_internet_plot)%>%
layout(legend = list(orientation = "h", x = 0.4, y = -0.2))
