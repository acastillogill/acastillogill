---
title: Predicting property prices
author: Ángela Castillo-Gill
date: '2018-08-09'
slug: predicting-property-prices
categories:
  - R
  - EDA
tags: 
  - Kaggle
  - Home sales prices
draft: TRUE
summary: What factors most affect sales prices for homes?
output:
  blogdown::html_page:
    toc: true
    number_sections: true
    toc_depth: 2
  fig_caption: true
editor_options: 
  chunk_output_type: inline
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>

<div id="TOC">
<ul>
<li><a href="#summary"><span class="toc-section-number">1</span> Summary</a></li>
<li><a href="#purpose-of-this-post"><span class="toc-section-number">2</span> Purpose of this post</a></li>
<li><a href="#the-data"><span class="toc-section-number">3</span> The data</a></li>
<li><a href="#data-exploration"><span class="toc-section-number">4</span> Data exploration</a></li>
<li><a href="#techniques-used"><span class="toc-section-number">5</span> Techniques used</a></li>
</ul>
</div>

<div id="summary" class="section level1">
<h1><span class="header-section-number">1</span> Summary</h1>
<p><em>To see the code used in this post, visit my <a href="https://www.kaggle.com/adcastillogill/exploring-kiva-loans">kernel on kaggle in R Markdown format</a>.</em></p>
</div>
<div id="purpose-of-this-post" class="section level1">
<h1><span class="header-section-number">2</span> Purpose of this post</h1>
</div>
<div id="the-data" class="section level1">
<h1><span class="header-section-number">3</span> The data</h1>
<p>The dataset <a href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques">House Prices: Advanced Regression Techniques</a> was downloaded from Kaggle and put together by <a href="https://ww2.amstat.org/publications/jse/v19n3/decock.pdf">Dean De Cock.</a> It has 79 explanatory variables describing 1,460 homes in Ames, Iowa. The codebook for all the variables can be <a href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data">found here.</a> As I go along, I’ll explain the most releveant ones.</p>
<p>First we will see how many numerical vs. categorical variables there are.</p>
<pre><code>[1] 38
[1] 43</code></pre>
<p>Our dataset has 38 numeric and 43 categorical variables. Next, since we are interested in estimating sales prices <code>SalePrice</code>, we will recode categorical variables and see the most strongly correlated variables. There are 43 categorical variables available. I want to recode them, that is to make dummy variables (1 has that factor level, 0 doesn’t) to see a correlation table with the most correlated variables to <code>SalesPrice</code>.</p>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-4">Table 3.1: </span>Top 14 correlations with SalePrice
</caption>
<thead>
<tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:right;">
Correlation
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
OverallQual
</td>
<td style="text-align:right;">
0.7909816
</td>
</tr>
<tr>
<td style="text-align:left;">
GrLivArea
</td>
<td style="text-align:right;">
0.7086245
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageCars
</td>
<td style="text-align:right;">
0.6404092
</td>
</tr>
<tr>
<td style="text-align:left;">
GarageArea
</td>
<td style="text-align:right;">
0.6234314
</td>
</tr>
<tr>
<td style="text-align:left;">
TotalBsmtSF
</td>
<td style="text-align:right;">
0.6135806
</td>
</tr>
<tr>
<td style="text-align:left;">
X1stFlrSF
</td>
<td style="text-align:right;">
0.6058522
</td>
</tr>
<tr>
<td style="text-align:left;">
FullBath
</td>
<td style="text-align:right;">
0.5606638
</td>
</tr>
<tr>
<td style="text-align:left;">
BsmtQualEx
</td>
<td style="text-align:right;">
0.5531048
</td>
</tr>
<tr>
<td style="text-align:left;">
TotRmsAbvGrd
</td>
<td style="text-align:right;">
0.5337232
</td>
</tr>
<tr>
<td style="text-align:left;">
YearBuilt
</td>
<td style="text-align:right;">
0.5228973
</td>
</tr>
<tr>
<td style="text-align:left;">
YearRemodAdd
</td>
<td style="text-align:right;">
0.5071010
</td>
</tr>
<tr>
<td style="text-align:left;">
KitchenQualEx
</td>
<td style="text-align:right;">
0.5040937
</td>
</tr>
<tr>
<td style="text-align:left;">
KitchenQualTA
</td>
<td style="text-align:right;">
-0.5192979
</td>
</tr>
<tr>
<td style="text-align:left;">
ExterQualTA
</td>
<td style="text-align:right;">
-0.5890435
</td>
</tr>
</tbody>
</table>
<p>The variables that are most correlated to <code>SalePrice</code> are:</p>
<ul>
<li><code>OverallQual</code>: Rates the overall material and finish of the house</li>
<li><code>GrLivArea</code>: Above grade (ground) living area square feet</li>
<li><code>GarageCars</code>: Size of garage in car capacity</li>
<li><code>GarageArea</code>: Size of garage in square feet</li>
<li><code>TotalBsmtSF</code>: Total square feet of basement area</li>
<li><code>X1stFlrSF</code>: First Floor square feet</li>
<li><code>FullBath</code>: Full bathrooms above grade</li>
<li><code>TotRmsAbvGrd</code>: Total rooms above grade (does not include bathrooms)</li>
<li><code>YearBuilt</code>: Original construction date<br />
</li>
<li><code>YearRemodAdd</code>: Remodel date (same as construction date if no remodelling or additions)</li>
<li><code>ExterQual</code>: Evaluates the quality of the material on the exterior</li>
<li><code>ExterCond</code>: Evaluates the present condition of the material on the exterior</li>
<li><code>BsmtQual</code>: Evaluates the height of the basement</li>
<li><code>KitchenQual</code>: Kitchen quality</li>
<li><code>FireplaceQu</code>: Fireplace quality</li>
<li><code>GarageQual</code>: Garage quality</li>
<li><code>GarageCond</code>: Garage condition</li>
<li><code>PoolQC</code>: Pool quality</li>
<li><code>Fence</code>: Fence quality</li>
</ul>
</div>
<div id="data-exploration" class="section level1">
<h1><span class="header-section-number">4</span> Data exploration</h1>
<p>First we will check that there is no multicolinearity amongst highly correlated variables. <em>explain here what is multicolinearity</em>.</p>
<pre><code>  OverallQual     GrLivArea    GarageCars    GarageArea   TotalBsmtSF 
     3.188492      5.084395      5.259511      4.953950      3.635031 
    X1stFlrSF      FullBath    BsmtQualEx  TotRmsAbvGrd     YearBuilt 
     3.730712      2.265751      1.592110      3.427834      2.463106 
 YearRemodAdd KitchenQualEx KitchenQualTA   ExterQualTA 
     1.983189      1.513045      2.107762      2.524197 </code></pre>
<p>We can see that the variables related to garage show some signs of multicolinearity so I will take 2 out, <code>GrLivArea</code> and <code>GarageCars</code>.</p>
<pre><code>  OverallQual    GarageArea   TotalBsmtSF     X1stFlrSF      FullBath 
     2.929619      1.748546      3.614102      3.573497      2.113724 
   BsmtQualEx  TotRmsAbvGrd     YearBuilt  YearRemodAdd KitchenQualEx 
     1.590545      1.822771      2.290153      1.980998      1.511142 
KitchenQualTA   ExterQualTA 
     2.100161      2.515708 </code></pre>
<p>Now all numeric variables left do not have a high VIF amongst each other. We will inspect scatter plots against the response variable <code>SalePrice</code>.</p>
<p><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-1.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-2.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-3.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-4.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-5.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-6.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-7.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-8.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-9.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-10.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-11.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/high-cor-geompoint-12.png" width="672" /></p>
<p>Some numeric variables can actually be seen as factors, these are: <code>OverallQual</code>, <code>FullBath</code>, and <code>TotRmsAbvGrd</code>.</p>
<p><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/unnamed-chunk-8-1.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/unnamed-chunk-8-2.png" width="672" /><img src="/post/2018-08-09-predicting-property-prices_files/figure-html/unnamed-chunk-8-3.png" width="672" /></p>
</div>
<div id="techniques-used" class="section level1">
<h1><span class="header-section-number">5</span> Techniques used</h1>
<ul>
<li><p>I
# Questions from this analysis</p></li>
<li></li>
</ul>
</div>
